"use strict";(()=>{function d(e,t,r){if(r===void 0){return e&&e.h5s&&e.h5s.data&&e.h5s.data[t]}else{e.h5s=e.h5s||{};e.h5s.data=e.h5s.data||{};e.h5s.data[t]=r}}function t(e){if(e.h5s){delete e.h5s.data}}var h=(e,t)=>{if(!(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array)){throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.")}if(typeof t!=="string"){return Array.from(e)}return Array.from(e).filter(e=>e.nodeType===1&&e.matches(t))};var v=new Map;var W=class{_config=new Map;_placeholder=void 0;_data=new Map;set config(e){if(typeof e!=="object"){throw new Error("You must provide a valid configuration object to the config setter.")}const t=Object.assign({},e);this._config=new Map(Object.entries(t))}get config(){const r={};this._config.forEach((e,t)=>{r[t]=e});return r}setConfig(e,t){if(!this._config.has(e)){throw new Error(`Trying to set invalid configuration item: ${e}`)}this._config.set(e,t)}getConfig(e){if(!this._config.has(e)){throw new Error(`Invalid configuration item requested: ${e}`)}return this._config.get(e)}get placeholder(){return this._placeholder}set placeholder(e){if(!(e instanceof HTMLElement)&&e!==null){throw new Error("A placeholder must be an html element or null.")}this._placeholder=e}setData(e,t){if(typeof e!=="string"){throw new Error("The key must be a string.")}this._data.set(e,t)}getData(e){if(typeof e!=="string"){throw new Error("The key must be a string.")}return this._data.get(e)}deleteData(e){if(typeof e!=="string"){throw new Error("The key must be a string.")}return this._data.delete(e)}};var E=e=>{if(!(e instanceof HTMLElement)){throw new Error("Please provide a sortable to the store function.")}if(!v.has(e)){v.set(e,new W)}return v.get(e)};function i(t,r,n){if(t instanceof Array){for(let e=0;e<t.length;++e){i(t[e],r,n)}return}t.addEventListener(r,n);E(t).setData(`event${r}`,n)}function o(t,r){if(t instanceof Array){for(let e=0;e<t.length;++e){o(t[e],r)}return}t.removeEventListener(r,E(t).getData(`event${r}`));E(t).deleteData(`event${r}`)}function s(t,r,n){if(t instanceof Array){for(let e=0;e<t.length;++e){s(t[e],r,n)}return}t.setAttribute(r,n)}function n(t,r){if(t instanceof Array){for(let e=0;e<t.length;++e){n(t[e],r)}return}t.removeAttribute(r)}var w=e=>{if(!e.parentElement||e.getClientRects().length===0){throw new Error("target element must be part of the dom")}const t=e.getClientRects()[0];return{left:t.left+window.pageXOffset,right:t.right+window.pageXOffset,top:t.top+window.pageYOffset,bottom:t.bottom+window.pageYOffset}};var N=(t,r=0)=>{let n;return(...e)=>{clearTimeout(n);n=setTimeout(()=>{t(...e)},r)}};var y=(e,t)=>{if(!(e instanceof HTMLElement)||!(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array)){throw new Error("You must provide an element and a list of elements.")}return Array.from(t).indexOf(e)};var c=e=>{if(!(e instanceof HTMLElement)){throw new Error("Element is not a node element.")}return e.parentNode!==null};var r=(e,t,r)=>{if(!(e instanceof HTMLElement)||!(e.parentElement instanceof HTMLElement)){throw new Error("target and element must be a node")}e.parentElement.insertBefore(t,r==="before"?e:e.nextElementSibling)};var F=(e,t)=>r(e,t,"before");var q=(e,t)=>r(e,t,"after");var R=(t,r=(e,t)=>e,e=e=>e)=>{if(!(t instanceof HTMLElement)||!t.isSortable===true){throw new Error("You need to provide a sortableContainer to be serialized.")}if(typeof r!=="function"||typeof e!=="function"){throw new Error("You need to provide a valid serializer for items and the container.")}const n=d(t,"opts");const o=n.items;const a=h(t.children,o);const i=a.map(e=>{return{parent:t,node:e,html:e.outerHTML,index:y(e,a)}});const s={node:t,itemCount:i.length};return{container:e(s),items:i.map(e=>r(e,t))}};var X=(e,t,r="sortable-placeholder")=>{if(!(e instanceof HTMLElement)){throw new Error("You must provide a valid element as a sortable.")}if(!(t instanceof HTMLElement)&&t!==void 0){throw new Error("You must provide a valid element as a placeholder or set ot to undefined.")}if(t===void 0){if(["UL","OL"].includes(e.tagName)){t=document.createElement("li")}else if(["TABLE","TBODY"].includes(e.tagName)){t=document.createElement("tr");t.innerHTML='<td colspan="100"></td>'}else{t=document.createElement("div")}}if(typeof r==="string"){t.classList.add(...r.split(" "))}return t};var b=e=>{if(!(e instanceof HTMLElement)){throw new Error("You must provide a valid dom element")}const r=window.getComputedStyle(e);if(r.getPropertyValue("box-sizing")==="border-box"){return parseInt(r.getPropertyValue("height"),10)}return["height","padding-top","padding-bottom"].map(e=>{const t=parseInt(r.getPropertyValue(e),10);return isNaN(t)?0:t}).reduce((e,t)=>e+t)};var T=e=>{if(!(e instanceof HTMLElement)){throw new Error("You must provide a valid dom element")}const r=window.getComputedStyle(e);return["width","padding-left","padding-right"].map(e=>{const t=parseInt(r.getPropertyValue(e),10);return isNaN(t)?0:t}).reduce((e,t)=>e+t)};var a=(e,t)=>{if(!(e instanceof Array)){throw new Error("You must provide a Array of HTMLElements to be filtered.")}if(typeof t!=="string"){return e}return e.filter(e=>{return e.querySelector(t)instanceof HTMLElement||e.shadowRoot&&e.shadowRoot.querySelector(t)instanceof HTMLElement}).map(e=>{return e.querySelector(t)||e.shadowRoot&&e.shadowRoot.querySelector(t)})};var f=e=>{return e.composedPath&&e.composedPath()[0]||e.target};var j=(e,t,r)=>{return{element:e,posX:r.pageX-t.left,posY:r.pageY-t.top}};var B=(e,t,r)=>{if(!(e instanceof Event)){throw new Error("setDragImage requires a DragEvent as the first argument.")}if(!(t instanceof HTMLElement)){throw new Error("setDragImage requires the dragged element as the second argument.")}if(!r){r=j}if(e.dataTransfer&&e.dataTransfer.setDragImage){const n=w(t);const o=r(t,n,e);if(!(o.element instanceof HTMLElement)||typeof o.posX!=="number"||typeof o.posY!=="number"){throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].")}e.dataTransfer.effectAllowed="copyMove";e.dataTransfer.setData("text/plain",f(e).id);e.dataTransfer.setDragImage(o.element,o.posX,o.posY)}};var u=(e,t)=>{if(e.isSortable===true){const r=E(e).getConfig("acceptFrom");if(r!==null&&r!==false&&typeof r!=="string"){throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.')}if(r!==null){return r!==false&&r.split(",").filter(function(e){return e.length>0&&t.matches(e)}).length>0}if(e===t){return true}if(E(e).getConfig("connectWith")!==void 0&&E(e).getConfig("connectWith")!==null){return E(e).getConfig("connectWith")===E(t).getConfig("connectWith")}}return false};var $={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:false,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:false,dropTargetContainerClass:false,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null,orientation:"vertical"};function U(r,n=250){if(typeof r!=="function"){throw new Error("You must provide a function as the first argument for throttle.")}if(typeof n!=="number"){throw new Error("You must provide a number as the second argument for throttle.")}let o=null;return(...e)=>{const t=Date.now();if(o===null||t-o>=n){o=t;r.apply(this,e)}}}var l=(e,t)=>{if(typeof E(e).getConfig("hoverClass")==="string"){const r=E(e).getConfig("hoverClass").split(" ");if(t===true){i(e,"mousemove",U(t=>{if(t.buttons===0){h(e.children,E(e).getConfig("items")).forEach(e=>{if(e===t.target||e.contains(t.target)){e.classList.add(...r)}else{e.classList.remove(...r)}})}},E(e).getConfig("throttleTime")));i(e,"mouseleave",()=>{h(e.children,E(e).getConfig("items")).forEach(e=>{e.classList.remove(...r)})})}else{o(e,"mousemove");o(e,"mouseleave")}}};var C;var L;var x;var p;var m;var D;var M;var I;var H;var g=function(e){o(e,"dragstart");o(e,"dragend");o(e,"dragover");o(e,"dragenter");o(e,"drop");o(e,"mouseenter");o(e,"mouseleave")};var A=function(e,t){if(e){o(e,"dragleave")}if(t&&t!==e){o(t,"dragleave")}};var k=function(e,t){let r=e;if(E(t).getConfig("copy")===true){r=e.cloneNode(true);s(r,"aria-copied","true");e.parentElement.appendChild(r);r.style.display="none";r.oldDisplay=e.style.display}return r};var S=function(e){t(e);n(e,"aria-dropeffect")};var Y=function(e){n(e,"aria-grabbed");n(e,"aria-copied");n(e,"draggable");n(e,"role")};function _(e,t){if(t.composedPath){return t.composedPath().find(e=>e.isSortable)}while(e.isSortable!==true){e=e.parentElement}return e}function O(e,t){const r=d(e,"opts");const n=h(e.children,r.items);const o=n.filter(function(e){return e.contains(t)||e.shadowRoot&&e.shadowRoot.contains(t)});return o.length>0?o[0]:t}var V=function(e){const t=d(e,"opts")||{};const r=h(e.children,t.items);const n=a(r,t.handle);l(e,false);o(e,"dragover");o(e,"dragenter");o(e,"dragstart");o(e,"dragend");o(e,"drop");S(e);o(n,"mousedown");g(r);Y(r);A(p,I);e.isSortable=false};var P=function(e){const t=d(e,"opts");const r=h(e.children,t.items);const n=a(r,t.handle);s(e,"aria-dropeffect","move");d(e,"_disabled","false");s(n,"draggable","true");l(e,true);if(t.disableIEFix===false){const o=(document||window.document).createElement("span");if(typeof o.dragDrop==="function"){i(n,"mousedown",function(){if(r.indexOf(this)!==-1){this.dragDrop()}else{let e=this.parentElement;while(r.indexOf(e)===-1){e=e.parentElement}e.dragDrop()}})}}};var G=function(e){const t=d(e,"opts");const r=h(e.children,t.items);const n=a(r,t.handle);s(e,"aria-dropeffect","none");d(e,"_disabled","true");s(n,"draggable","false");o(n,"mousedown");l(e,false)};var J=function(e){const t=d(e,"opts");const r=h(e.children,t.items);const n=a(r,t.handle);d(e,"_disabled","false");g(r);A(p,I);o(n,"mousedown");o(e,"dragover");o(e,"dragenter");o(e,"drop")};function z(e,g){const a=String(g);g=g||{};if(typeof e==="string"){e=document.querySelectorAll(e)}if(e instanceof HTMLElement){e=[e]}e=Array.prototype.slice.call(e);if(/serialize/.test(a)){return e.map(e=>{const t=d(e,"opts");return R(e,t.itemSerializer,t.containerSerializer)})}e.forEach(function(l){if(/enable|disable|destroy/.test(a)){return z[a](l)}["connectWith","disableIEFix"].forEach(e=>{if(Object.prototype.hasOwnProperty.call(g,e)&&g[e]!==null){console.warn(`HTML5Sortable: You are using the deprecated configuration "${e}". This will be removed in an upcoming version, make sure to migrate to the new options when updating.`)}});g=Object.assign({},$,E(l).config,g);E(l).config=g;d(l,"opts",g);l.isSortable=true;J(l);const e=h(l.children,g.items);let t;if(g.placeholder!==null&&g.placeholder!==void 0){const n=document.createElement(l.tagName);if(g.placeholder instanceof HTMLElement){n.appendChild(g.placeholder)}else{n.innerHTML=g.placeholder}t=n.children[0]}E(l).placeholder=X(l,t,g.placeholderClass);d(l,"items",g.items);if(g.acceptFrom){d(l,"acceptFrom",g.acceptFrom)}else if(g.connectWith){d(l,"connectWith",g.connectWith)}P(l);s(e,"role","option");s(e,"aria-grabbed","false");i(l,"dragstart",function(e){const t=f(e);if(t.isSortable===true){return}e.stopImmediatePropagation();if(g.handle&&!t.matches(g.handle)||t.getAttribute("draggable")==="false"){return}const r=_(t,e);const n=O(r,t);M=h(r.children,g.items);m=M.indexOf(n);D=y(n,r.children);p=r;B(e,n,g.customDragImage);L=b(n);x=T(n);n.classList.add(g.draggingClass);C=k(n,r);s(C,"aria-grabbed","true");r.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:D,index:m,container:p},item:C,originalTarget:t,dragEvent:e}}))});i(l,"dragenter",e=>{const r=f(e);const n=_(r,e);if(n&&n!==I){H=h(n.children,d(n,"items")).filter(e=>e!==E(l).placeholder);if(g.dropTargetContainerClass){n.classList.add(g.dropTargetContainerClass)}n.dispatchEvent(new CustomEvent("sortenter",{detail:{origin:{elementIndex:D,index:m,container:p},destination:{container:n,itemsBeforeUpdate:H},item:C,originalTarget:r}}));i(n,"dragleave",function(e){const t=e.relatedTarget||e.fromElement;if(!e.currentTarget.contains(t)){if(g.dropTargetContainerClass){n.classList.remove(g.dropTargetContainerClass)}n.dispatchEvent(new CustomEvent("sortleave",{detail:{origin:{elementIndex:D,index:m,container:n},item:C,originalTarget:r}}))}})}I=n});i(l,"dragend",function(e){if(!C){return}C.classList.remove(g.draggingClass);s(C,"aria-grabbed","false");if(C.getAttribute("aria-copied")==="true"&&d(C,"dropped")!=="true"){C.remove()}if(C.oldDisplay!==void 0){C.style.display=C.oldDisplay;delete C.oldDisplay}const t=Array.from(v.values()).map(e=>e.placeholder).filter(e=>e instanceof HTMLElement).filter(c)[0];if(t){t.remove()}l.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:D,index:m,container:p},item:C,dragEvent:e}}));I=null;C=null;L=null;x=null});i(l,"drop",function(e){if(!u(l,C.parentElement)){return}e.preventDefault();e.stopPropagation();d(C,"dropped","true");const t=Array.from(v.values()).map(e=>{return e.placeholder}).filter(e=>e instanceof HTMLElement).filter(c)[0];if(t){t.replaceWith(C);if(C.oldDisplay!==void 0){C.style.display=C.oldDisplay;delete C.oldDisplay}}else{d(C,"dropped","false");return}const r=E(l).placeholder;const n=h(p.children,g.items).filter(e=>e!==r);const o=this.isSortable===true?this:this.parentElement;const a=h(o.children,d(o,"items")).filter(e=>e!==r);const i=y(C,Array.from(C.parentElement.children).filter(e=>e!==r));const s=y(C,a);if(g.dropTargetContainerClass){o.classList.remove(g.dropTargetContainerClass)}l.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:D,index:m,container:p},item:C,destination:{index:s,elementIndex:i,container:o,itemsBeforeUpdate:H,items:a},dragEvent:e}}));if(D!==i||p!==o){l.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:D,index:m,container:p,itemsBeforeUpdate:M,items:n},destination:{index:s,elementIndex:i,container:o,itemsBeforeUpdate:H,items:a},item:C,dragEvent:e}}))}});const o=N((r,e,n,o)=>{if(!C){return}if(g.forcePlaceholderSize){E(r).placeholder.style.height=L+"px";E(r).placeholder.style.width=x+"px"}if(Array.from(r.children).indexOf(e)>-1){const a=b(e);const i=T(e);const s=y(E(r).placeholder,e.parentElement.children);const l=y(e,e.parentElement.children);if(a>L||i>x){const d=a-L;const c=i-x;const f=w(e).top;const u=w(e).left;if(s<l&&(g.orientation==="vertical"&&o<f||g.orientation==="horizontal"&&n<u)){return}if(s>l&&(g.orientation==="vertical"&&o>f+a-d||g.orientation==="horizontal"&&n>u+i-c)){return}}if(C.oldDisplay===void 0){C.oldDisplay=C.style.display}if(C.style.display!=="none"){C.style.display="none"}let t=false;try{const p=w(e).top+e.offsetHeight/2;const m=w(e).left+e.offsetWidth/2;t=g.orientation==="vertical"&&o>=p||g.orientation==="horizontal"&&n>=m}catch(e){t=s<l}if(t){q(e,E(r).placeholder)}else{F(e,E(r).placeholder)}Array.from(v.values()).filter(e=>e.placeholder!==void 0).forEach(e=>{if(e.placeholder!==E(r).placeholder){e.placeholder.remove()}})}else{const t=Array.from(v.values()).filter(e=>e.placeholder!==void 0).map(e=>{return e.placeholder});if(t.indexOf(e)===-1&&r===e&&!h(e.children,g.items).length){t.forEach(e=>e.remove());e.appendChild(E(r).placeholder)}}},g.debounce);const r=function(e){let t=e.target;const r=t.isSortable===true?t:_(t,e);t=O(r,t);if(!C||!u(r,C.parentElement)||d(r,"_disabled")==="true"){return}const n=d(r,"opts");if(parseInt(n.maxItems)&&h(r.children,d(r,"items")).length>=parseInt(n.maxItems)&&C.parentElement!==r){return}e.preventDefault();e.stopPropagation();e.dataTransfer.dropEffect=E(r).getConfig("copy")===true?"copy":"move";o(r,t,e.pageX,e.pageY)};i(e.concat(l),"dragover",r);i(e.concat(l),"dragenter",r)});return e}z.destroy=function(e){V(e)};z.enable=function(e){P(e)};z.disable=function(e){G(e)};z.__testing={data:d,removeItemEvents:g,removeItemData:Y,removeSortableData:S,removeContainerEvents:A}})();